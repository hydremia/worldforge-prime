# Worldforge Cartographer — Overview (v1.0)

## Purpose

The Cartographer subsystem provides **spatial logic** for Worldforge Prime. It does not generate art or images. Instead, it maintains a structured World Structure Model (WSM) and exposes deterministic APIs for:

- Map ingestion (turning described or uploaded maps into structured data).
- Environmental queries (biome, climate, terrain, elevation, hazard, MSS).
- Spatial relationships (adjacency, routes, nearest settlements).
- Worldbuilding support (proposed regions, settlements, and locations).
- Validation and canonization support for Archivist and OPS.

Cartographer is a **Cloudflare Worker** that lives alongside Nomina, Archivist, and OPS and is accessed by the single Worldforge Prime GPT via the `worldforge-api` action layer.

## Scope (v1.0)

Cartographer v1.0 is responsible for:

- Maintaining WSM nodes for worlds, continents, regions, realms, provinces, districts, settlements, and locations.
- Providing environmental metadata for any node (biome, climate, terrain, elevation, hazard, MSS).
- Guided ingestion of maps through interactive sessions.
- Producing non-destructive WSM update proposals for Archivist.
- Offering spatial queries used at runtime in DM and Creative modes.

Out of scope for v1.0:

- Visual map rendering (no PNG, SVG, or tile generation).
- VTT-style battlemap runtime (grid/LOS/cover). This is a potential v2+ extension.

## Role in the WF Prime Ecosystem

- **Prime GPT** orchestrates language and mode logic and calls Cartographer APIs.
- **Cartographer** stores and reasons about spatial structure.
- **Archivist** is the canonical source of truth and approves WSM update proposals.
- **Nomina** consumes Cartographer’s environment and tags to bias naming.
- **OPS** uses Cartographer’s validation endpoints as part of QGate.

## High-Level Capabilities

- World Structure Model maintenance and queries.
- Environmental system backed by consistent biome/climate/terrain logic.
- Guided, hybrid map ingestion:
  - Feature detection via GPT/user interpretation.
  - Clarification questions generated by Cartographer.
  - Draft WSM generation and confirmation loop.
- Spatial queries for DM/Creative:
  - Environment for a node.
  - Region adjacency.
  - Approximate route proposals.
  - Nearest settlement queries.
- Worldgen tools:
  - Propose settlements and locations that fit geography.
  - Propose regions in underdeveloped areas.
- Validation helpers for Archivist and OPS.
